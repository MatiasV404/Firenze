{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- Page Title and Meta Descriptions -->
    <title>Firenze</title>
    <meta name="description" content="StyleBarber - Bootstrap 4 Responsive HTML5 Template">
    <meta name="keywords" content="StyleBarber, barber, salon, HTML5, Bootstrap">
    <meta name="author" content="">

    <!-- Favicon and Touch Icon -->
    <link rel="shortcut icon" href="{% static 'images/favicon.ico' %}" type="image/x-icon">
    <link rel="apple-touch-icon" href="{% static 'images/apple-touch-icon.png' %}">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">

    <!-- CSS Stylesheets -->
    <link rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}">
    <link rel="stylesheet" href="{% static 'css/versions.css' %}">
    <link rel="stylesheet" href="{% static 'css/responsive.css' %}">
    <link rel="stylesheet" href="{% static 'css/custom.css' %}">
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/css/bootstrap-datepicker.min.css" />
</head>

<body class="barber_version">

	<!-- Start header -->
	<header class="top-navbar">
		<nav class="navbar navbar-expand-lg navbar-light bg-light">
			<div class="container">
				<a class="navbar-brand" href="{% url 'index' %}">
					<img src="{% static 'images/logo.png' %}" alt="" />
				</a>
				<button class="navbar-toggler collapsed" type="button" data-toggle="collapse" data-target="#navbars-rs-food" aria-controls="navbars-rs-food" aria-expanded="false" aria-label="Toggle navigation">
					<span class="icon-bar top-bar"></span>
					<span class="icon-bar middle-bar"></span>
					<span class="icon-bar bottom-bar"></span>
				</button>
				<div class="collapse navbar-collapse" id="navbars-rs-food">
					<ul class="navbar-nav ml-auto">
						<li class="nav-item active"><a class="nav-link" href="{% url 'index' %}">Inicio</a></li>
						<li class="nav-item"><a class="nav-link" href="{% url 'services' %}">Nuestros servicios</a></li>
						<li class="nav-item"><a class="nav-link" href="{% url 'about' %}">Sobre Nosotros</a></li>
						<li class="nav-item"><a class="nav-link" href="{% url 'barbers' %}">Productos</a></li>
						<li class="nav-item"><a class="nav-link" href="{% url 'appointment' %}">Agenda tu cita</a></li>
						{% if user.is_authenticated %}
							<li class="nav-item"><a class="nav-link" href="{% url 'cerrar_sesion' %}">Cerrar sesión</a></li>
						{% else %}
							<li class="nav-item"><a class="nav-link" href="{% url 'login' %}">Iniciar sesión</a></li>
							<li class="nav-item"><a class="nav-link" href="{% url 'registro' %}">Registro</a></li>
						{% endif %}
						<li class="nav-item">
							<a class="nav-link" href="{% url 'carrito' %}">
								<i class="fas fa-shopping-cart"></i> <!-- Icono de carrito, asegúrate de tener Font Awesome -->
							</a>
						</li>
					</ul>
				</div>
			</div>
		</nav>
	</header>
	<!-- End header -->


    <!-- Page Content -->
    <div id="page-content-wrapper">
        <div id="appointment" class="section wb">
            <div class="container">
                <div class="section-title row text-center">
                    <div class="col-md-8 offset-md-2">
                        <small>¡HAGAMOS UNA CITA PARA TU VIDA!</small>
                        <h3>Reserva ahora</h3>
                    </div>
                </div><!-- end title -->

                <div class="row">
                    <div class="col-lg-12">
                        <div class="contact_form">
                            <div id="message"></div>
                            <form id="contactform" method="POST" action="{% url 'appointment' %}">
                                {% csrf_token %}
                                <fieldset class="row row-fluid">
                                    <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
                                        <input type="text" name="first_name" id="first_name" class="form-control" placeholder="Nombre" required>
                                    </div>
                                    <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
                                        <input type="text" name="last_name" id="last_name" class="form-control" placeholder="Apellido" required>
                                    </div>
                                    <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
                                        <input type="email" name="email" id="email" class="form-control" placeholder="Tu Correo" required>
                                    </div>
                                    <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
                                        <input type="text" name="phone" id="phone" class="form-control" placeholder="Tu Teléfono" required>
                                    </div>
                                    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                        <select id="service" name="service" class="form-control" required>
                                            <option value="" disabled selected>Selecciona un Servicio</option>
                                            <option value="corte">Corte de Cabello</option>
                                            <option value="perfilado">Perfilado de Barba</option>
                                            <option value="manicure">Manicure Completo</option>
                                            <option value="pedicure">Pedicure Completo</option>
											<option value="Extensiones de Uñas">Extensiones de Uñas</option>
											<option value="Diseño de Uñas">Diseño de Uñas</option>
											<option value="Tratamiento de Hidratación">Tratamiento de Hidratación</option>
                                        </select>
                                    </div>
                                    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                        <input type="date" name="date" class="form-control" required>
                                    </div>
                                    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                        <select id="appointment_time" name="time" class="form-control" required>
                                            <option value="" disabled selected>Selecciona Hora</option>
                                            <!-- Horarios se añadirán dinámicamente aquí -->
                                        </select>
                                    </div>
                                    <div class="form-btn text-center">
                                        <button type="submit" class="btn btn-light btn-radius btn-brd grd1 btn-block subt">Solicitar Cita</button>
                                    </div>
                                      {% if success %}
    <div id="popup-success" style="display: none;">
        <p>Solicitud enviada con éxito</p>
        <button onclick="closePopup()">Cerrar</button>
    </div>
    {% endif %}

                                </fieldset>
                            </form>
                        </div>
                    </div><!-- end col -->
                </div><!-- end row -->
            </div><!-- end container -->
        </div><!-- end section -->
    </div>

    <!-- Footer -->
    <div class="copyrights">
        <div class="container">
            <div class="footer-distributed">
                <div class="footer-left">
                    <p class="footer-links">
                        <a href="{% url 'index' %}">Inicio</a>
                        <a href="{% url 'services' %}">Servicios</a>
                        <a href="{% url 'about' %}">Acerca de</a>
                        <a href="{% url 'barbers' %}">Nuestro Equipo</a>
                        <a href="{% url 'appointment' %}">Cita</a>
                    </p>
                    <p class="footer-company-name">Todos los derechos reservados. &copy; 2024 <a href="{% url 'index' %}">Firenze</a></p>
                </div>
            </div>
        </div>
    </div>

    <!-- Scroll to Top Button -->
    <a href="#" id="scroll-to-top" class="dmtop global-radius"><i class="fa fa-angle-up"></i></a>

    <!-- JavaScript Libraries -->

    <script src="{% static 'js/responsive-tabs.js' %}"></script>
    <script src="{% static 'js/custom.js' %}"></script>
    
    <!-- Google Maps API (antes de map.js) -->
    <script src="{% static 'js/map.js' %}"></script>

    <!-- Script para actualizar los horarios en función del servicio -->
    <script>
        const availableTimes = {
            'corte': ['10:00', '11:00', '14:00', '15:00'],
            'perfilado': ['10:30', '11:30', '14:30', '15:30'],
            'manicure': ['09:00', '13:00', '16:00'],
            'pedicure': ['09:30', '13:30', '16:30']
        };

        document.getElementById('service').addEventListener('change', function() {
            const selectedService = this.value;
            const timeSelect = document.getElementById('appointment_time');
            timeSelect.innerHTML = '<option value="" disabled selected>Selecciona Hora</option>';
            
            if (availableTimes[selectedService]) {
                availableTimes[selectedService].forEach(function(time) {
                    const option = document.createElement('option');
                    option.value = time;
                    option.textContent = time;
                    timeSelect.appendChild(option);
                });
            }
        });
    </script>

</body>
</html>
